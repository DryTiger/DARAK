/* Retro Room Theme - 80s Arcade / DVD Rental Vibe */
:root {
  /* Palette */
  --bg-dark: #121212;
  --bg-panel: #1e1e24;
  --accent-neon-pink: #ff2a6d;
  --accent-neon-blue: #05d9e8;
  --accent-gold: #ffc857;
  --text-main: #e0e0e0;
  --text-muted: #888888;

  /* Glassmorphism */
  --glass-border: rgba(255, 255, 255, 0.1);
  --glass-bg: rgba(30, 30, 36, 0.7);
  --glass-highlight: rgba(255, 255, 255, 0.05);

  /* Shadows */
  --neon-glow-pink: 0 0 10px rgba(255, 42, 109, 0.5);
  --neon-glow-blue: 0 0 10px rgba(5, 217, 232, 0.5);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Exo 2', 'Segoe UI', sans-serif;
  /* UPDATE */
  background-color: var(--bg-dark);
  /* Subtle grain/noise background could be added here */
  color: var(--text-main);
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
  padding-right: 100px;
  /* Reserve space for sidebar */
}

/* Scrollbar Styling */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--bg-dark);
}

::-webkit-scrollbar-thumb {
  background: #333;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--accent-neon-blue);
}

.container {
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-radius: 20px;
  padding: 40px;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
  max-width: 1200px;
  width: 100%;
  position: relative;
  overflow: hidden;
}

/* CRT Scanline Effect Overlay for Container (Optional Retro Touch) */
.container::after {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
  background-size: 100% 4px;
  z-index: 100;
  pointer-events: none;
  opacity: 0.3;
}

/* Header */
h1 {
  font-family: 'Orbitron', sans-serif;
  /* UPDATE */
  text-align: center;
  color: #fff;
  margin-bottom: 10px;
  font-size: 3.5rem;
  letter-spacing: 4px;
  text-shadow: 2px 2px 0px var(--accent-neon-pink), -2px -2px 0px var(--accent-neon-blue);
  font-weight: 800;
  text-transform: uppercase;
}

.subtitle {
  text-align: center;
  color: var(--accent-neon-blue);
  margin-bottom: 40px;
  font-size: 1.1em;
  font-weight: 400;
  letter-spacing: 2px;
  opacity: 0.8;
}

/* Navigation & Tabs */
.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
  padding: 10px;
  border-bottom: 1px solid var(--glass-border);
  padding-bottom: 20px;
}

.category-tabs {
  display: flex;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
}

.category-tab {
  padding: 8px 18px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--glass-border);
  border-radius: 8px;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 0.9em;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.category-tab:hover {
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
  text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
  border-color: rgba(255, 255, 255, 0.3);
}

.category-tab.active {
  background: var(--accent-neon-pink);
  color: #fff;
  border-color: var(--accent-neon-pink);
  box-shadow: var(--neon-glow-pink);
}

.month-nav {
  display: flex;
  align-items: center;
  gap: 20px;
}

.nav-button {
  background: none;
  border: 1px solid var(--glass-border);
  border-radius: 50%;
  width: 40px;
  height: 40px;
  font-size: 1.2em;
  color: var(--text-main);
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  display: flex;
  align-items: center;
  justify-content: center;
}

.nav-button:hover {
  background: var(--accent-neon-blue);
  color: #000;
  border-color: var(--accent-neon-blue);
  box-shadow: var(--neon-glow-blue);
  transform: scale(1.1);
}

.month-year {
  font-family: 'Orbitron', sans-serif;
  /* UPDATE */
  font-size: 1.5em;
  font-weight: 700;
  color: #fff;
  min-width: 160px;
  text-align: center;
}

/* Calendar Grid */
.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 10px;
  margin-bottom: 20px;
}

.day-header {
  text-align: center;
  font-weight: 600;
  color: var(--text-muted);
  padding: 10px;
  font-size: 0.9em;
  border-bottom: 1px solid var(--glass-border);
}

.day-header.weekend {
  color: var(--accent-neon-pink);
}

.day-cell {
  aspect-ratio: 3/4;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid var(--glass-border);
  border-radius: 12px;
  position: relative;
  transition: all 0.3s ease;
  cursor: pointer;
  overflow: hidden;
}

.day-cell:hover {
  border-color: var(--accent-neon-blue);
  box-shadow: inset 0 0 15px rgba(5, 217, 232, 0.2);
  transform: translateY(-2px);
}

.day-cell.other-month {
  opacity: 0.1;
  pointer-events: none;
}

.day-cell.today {
  border: 2px solid var(--accent-gold);
  box-shadow: 0 0 10px rgba(255, 200, 87, 0.3);
}

.day-number {
  position: absolute;
  top: 8px;
  left: 8px;
  font-size: 1em;
  font-weight: 600;
  color: var(--text-main);
  z-index: 2;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
}

.day-cell:nth-child(7n+1) .day-number {
  /* Sunday */
  color: var(--accent-neon-pink);
}

/* Image in Calendar */
.day-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  position: absolute;
  top: 0;
  left: 0;
  filter: brightness(0.9);
  transition: transform 0.3s ease;
}

.day-cell:hover .day-image {
  transform: scale(1.05);
  filter: brightness(1);
}

/* Floating Sidebar */
.floating-sidebar {
  position: fixed;
  right: 30px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 20px;
  padding: 20px;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(10px);
  border: 1px solid var(--glass-border);
  border-radius: 50px;
  z-index: 100;
  left: auto;
  /* Reset previous */
}

.sidebar-btn {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid transparent;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sidebar-btn:hover {
  color: #fff;
  background: var(--accent-neon-blue);
  box-shadow: var(--neon-glow-blue);
  transform: scale(1.1);
}

.sidebar-btn.active {
  background: var(--accent-neon-pink);
  color: #fff;
  box-shadow: var(--neon-glow-pink);
}


/* Modal Overhaul */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  backdrop-filter: blur(8px);
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
  /* KEY FIX */
  z-index: 2000;
}

#customPopup {
  z-index: 3000 !important;
}

.modal-overlay.active {
  display: flex;
  opacity: 1;
  pointer-events: auto;
  /* KEY FIX: Only capture clicks when active */
}

.modal-content {
  background: #25252d;
  width: 90%;
  max-width: 900px;
  max-height: 90vh;
  border-radius: 15px;
  position: relative;
  box-shadow: 0 0 40px rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  border: 1px solid #333;
}

/* Modal Background Filter */
.modal-content::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: var(--bg-image);
  background-size: cover;
  background-position: center;
  filter: blur(30px) brightness(0.4);
  opacity: 0.6;
  z-index: 0;
  transition: opacity 0.5s ease;
}

.modal-header {
  padding: 20px 30px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 10;
}

.modal-title {
  font-family: 'Orbitron', sans-serif;
  /* UPDATE */
  color: #fff;
  font-size: 1.8em;
  font-weight: 700;
  letter-spacing: 1px;
}

.close-btn {
  background: none;
  border: none;
  color: #fff;
  font-size: 2em;
  cursor: pointer;
  transition: color 0.2s;
}

.close-btn:hover {
  color: var(--accent-neon-pink);
}

.modal-body {
  padding: 30px;
  z-index: 5;
  overflow-y: auto;
}

.record-form {
  background: rgba(30, 30, 36, 0.85);
  padding: 30px;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.form-group {
  margin-bottom: 25px;
}

.form-label {
  display: block;
  margin-bottom: 10px;
  font-weight: 600;
  color: var(--accent-neon-blue);
  font-size: 0.9em;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.form-input,
.form-select,
.form-textarea {
  width: 100%;
  padding: 12px;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid #444;
  border-radius: 8px;
  color: #fff;
  font-size: 1em;
  transition: border-color 0.3s;
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
  outline: none;
  border-color: var(--accent-neon-blue);
  box-shadow: 0 0 8px rgba(5, 217, 232, 0.3);
}

.save-btn {
  background: linear-gradient(135deg, var(--accent-neon-blue), #2b5cff);
  color: #000;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  border: none;
  border-radius: 8px;
  padding: 18px;
  margin-top: 20px;
  box-shadow: 0 4px 15px rgba(5, 217, 232, 0.4);
}

.save-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(5, 217, 232, 0.6);
  background: linear-gradient(135deg, #2b5cff, var(--accent-neon-blue));
}


/* List View Styles */
.list-item {
  background: rgba(30, 30, 36, 0.9);
  border: 1px solid #333;
  color: #fff;
}

.list-item:hover {
  border-color: var(--accent-neon-pink);
  transform: translateY(-2px);
  background: rgba(40, 40, 48, 1);
}

.list-title {
  color: #fff;
}

.list-date {
  color: var(--accent-neon-blue);
}

.list-subtitle {
  color: #aaa;
}

.list-category {
  background: #444;
  color: #ddd;
}


/* Mobile */
@media (max-width: 768px) {
  .container {
    padding: 15px;
  }

  h1 {
    font-size: 2em;
  }

  .day-cell {
    aspect-ratio: 3/4;
  }

  .floating-sidebar {
    bottom: 20px;
    top: auto;
    left: 50%;
    transform: translateX(-50%);
    flex-direction: row;
    width: auto;
    padding: 10px 20px;
    border-radius: 30px;
    right: auto;
  }
}

/* Quadrant Grid for Calendar */
.quadrant-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr;
  width: 100%;
  height: 100%;
}

.quadrant-cell {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
  border: 0.5px solid rgba(0, 0, 0, 0.2);
}

.quadrant-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s;
}

.quadrant-cell:hover .quadrant-image {
  transform: scale(1.1);
}

/* Daily List Item Styles */
.daily-list-item {
  display: flex;
  align-items: center;
  padding: 15px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  cursor: pointer;
  transition: background 0.2s;
}

.daily-list-item:hover {
  background: rgba(255, 255, 255, 0.05);
}

.daily-list-thumb {
  width: 50px;
  height: 50px;
  border-radius: 6px;
  object-fit: cover;
  margin-right: 15px;
  border: 1px solid #444;
}

.daily-list-info h4 {
  color: #fff;
  font-weight: 600;
  margin-bottom: 3px;
}

.daily-list-info span {
  opacity: 1;
  z-index: 10;
}

/* Size classes */
.tag-xl {
  font-size: 1.8em;
  color: #ff2a6d;
}

.tag-lg {
  font-size: 1.4em;
  color: #ff5c8d;
}

.tag-md {
  font-size: 1.1em;
  color: #ff85a9;
}

.tag-sm {
  font-size: 0.9em;
  color: #ffadc5;
}

.tag-chip {
  background: var(--accent-neon-blue);
  color: #000;
  padding: 5px 12px;
  border-radius: 15px;
  font-size: 0.9em;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s;
}

.tag-chip:hover {
  background: #fff;
  transform: scale(1.05);
}

.tag-chip::after {
  content: ' Ã—';
  opacity: 0.5;
}

.add-tag-btn {
  background: transparent;
  border: 1px dashed #666;
  color: #666;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2em;
  transition: all 0.2s;
}

/* Suggested Tags */
.suggested-tags-container {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px dashed rgba(255, 255, 255, 0.1);
}

.tag-chip.suggestion {
  background: transparent;
  border: 1px dashed #666;
  color: #888;
  opacity: 0.8;
}

.tag-chip.suggestion:hover {
  border-color: var(--accent-neon-blue);
  color: var(--accent-neon-blue);
  background: rgba(5, 217, 232, 0.1);
  transform: scale(1.05);
}

.tag-chip.suggestion::after {
  content: ' +';
  opacity: 0.5;
}



/* Search UI */
.image-mode-tabs {
  display: flex;
  margin-bottom: 15px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.mode-tab {
  background: transparent;
  border: none;
  color: #888;
  padding: 10px 20px;
  cursor: pointer;
  font-family: inherit;
  font-size: 1em;
  border-bottom: 2px solid transparent;
}

.mode-tab.active {
  color: var(--accent-neon-blue);
  border-bottom-color: var(--accent-neon-blue);
}

.star {
  font-size: 2em;
  color: #333;
  cursor: pointer;
  transition: color 0.2s;
  user-select: none;
}

.star.active {
  color: var(--accent-neon-blue);
  text-shadow: 0 0 10px var(--accent-neon-blue);
}

.mood-selector {
  display: flex;
  gap: 15px;
}

.mood-option {
  font-size: 2em;
  opacity: 0.3;
  cursor: pointer;
  transition: all 0.2s;
  user-select: none;
  filter: grayscale(100%);
}

.search-box {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}

.search-go-btn {
  background: var(--accent-neon-blue);
  border: none;
  border-radius: 8px;
  color: #000;
  font-weight: 700;
  padding: 0 20px;
  cursor: pointer;
}

.search-results-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  max-height: 200px;
  overflow-y: auto;
}

.search-result-item {
  aspect-ratio: 2/3;
  width: 100%;
  object-fit: cover;
  border-radius: 8px;
  cursor: pointer;
  border: 2px solid transparent;
  transition: all 0.2s;
}

.search-result-item:hover {
  border-color: var(--accent-neon-pink);
  transform: scale(1.05);
}

.settings-btn {
  background: none;
  border: none;
  font-size: 1.5em;
  cursor: pointer;
  opacity: 0.5;
  transition: opacity 0.3s;
}

.settings-btn:hover {
  opacity: 1;
}

#settingsView {
  min-height: 400px;
  position: relative;
  z-index: 10;
}

/* Ticket Styles */
.ticket-visual {
  width: 380px;
  height: 600px;
  /* 9:16 approx for instagram story fit */
  background: #1a1a1a;
  color: #fff;
  border-radius: 20px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  font-family: 'Exo 2', sans-serif;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
  position: relative;
  border: 1px solid #333;
}

.ticket-header {
  height: 60%;
  position: relative;
  overflow: hidden;
}

.ticket-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.ticket-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 50%;
  background: linear-gradient(to top, #1a1a1a 10%, transparent);
}

.ticket-body {
  padding: 25px;
  background: #1a1a1a;
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  position: relative;
}

.ticket-date {
  color: var(--accent-gold);
  letter-spacing: 2px;
  font-size: 0.9em;
  margin-bottom: 10px;
}

.ticket-title {
  font-family: 'Orbitron', sans-serif;
  font-size: 1.8em;
  line-height: 1.2;
  margin-bottom: 15px;
  text-shadow: 0 0 5px rgba(255, 255, 255, 0.2);
}

.ticket-meta {
  color: #888;
  font-size: 0.9em;
  text-transform: uppercase;
  margin-bottom: 20px;
}

#ticketRating {
  color: var(--accent-gold);
}

.ticket-barcode {
  margin-top: auto;
  width: 80%;
}

.barcode-lines {
  height: 30px;
  background: repeating-linear-gradient(90deg,
      #fff,
      #fff 2px,
      #000 2px,
      #000 4px);
  margin-bottom: 5px;
}

.ticket-id {
  font-family: monospace;
  font-size: 0.8em;
  color: #555;
  letter-spacing: 4px;
}


/* Bookshelf Bucket List */
.bookshelf {
  display: flex;
  flex-direction: column;
  gap: 20px;
  padding: 20px;
  background: #2a2a2a;
  /* Dark wood backing? */
  border-radius: 10px;
  min-height: 400px;
}

.shelf-row {
  height: 160px;
  /* Increased Height */
  border-bottom: 20px solid #2d1b12;

  /* Wood shelf */
  display: flex;
  align-items: flex-end;
  padding: 0 10px;
  gap: 2px;
  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.5);
  position: relative;
}

.book-spine {
  width: 45px;
  height: 94%;
  /* Slightly shorter than full shelf */
  background: linear-gradient(90deg,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0.2) 10%,
      rgba(0, 0, 0, 0.1) 12%,
      rgba(0, 0, 0, 0.1) 88%,
      rgba(255, 255, 255, 0.2) 90%,
      rgba(0, 0, 0, 0.3) 100%),
    var(--book-color, #444);
  /* Fallback */
  border-radius: 3px 6px 6px 3px;
  /* Rounded spine */
  border-left: 1px solid rgba(255, 255, 255, 0.15);
  border-right: 2px solid rgba(0, 0, 0, 0.4);
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  writing-mode: vertical-rl;
  text-orientation: mixed;
  color: #eee;
  font-family: 'Exo 2', sans-serif;
  font-weight: 600;
  font-size: 0.9em;
  letter-spacing: 1px;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  overflow: hidden;
  white-space: nowrap;
  padding: 10px 0;
  box-shadow: 4px 0 8px rgba(0, 0, 0, 0.6), inset 2px 0 3px rgba(255, 255, 255, 0.1);

}

.book-spine:hover {
  transform: translateY(-15px) scale(1.05);
  z-index: 100;
  margin-bottom: 0;
  box-shadow: 8px 10px 15px rgba(0, 0, 0, 0.8), inset 0 0 10px rgba(255, 255, 255, 0.2);
  filter: brightness(1.2);
}


.add-book-slot {
  width: 30px;
  height: 90%;
  border: 1px dashed #666;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #666;
  font-weight: bold;
  cursor: pointer;
  opacity: 0.3;
  transition: opacity 0.2s;
}

.add-book-slot:hover {
  opacity: 1;
  color: var(--accent-neon-blue);
  border-color: var(--accent-neon-blue);
}

.book-spine.movie {
  background: #d32f2f;
}

.book-spine.book {
  background: #1976d2;
}

.book-spine.drama {
  background: #388e3c;
}

.book-spine.exhibit {
  background: #fbc02d;
  color: #000;
}

.book-spine.concert {
  background: #7b1fa2;
}

/* Statistics Dashboard */
.stats-dashboard {
  padding: 20px;
  max-width: 800px;
  margin: 0 auto;
}

.stat-main-card {
  background: rgba(42, 42, 42, 0.8);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 15px;
  padding: 30px;
  text-align: center;
  margin-bottom: 20px;
  backdrop-filter: blur(10px);
}

.stat-main-card h3 {
  font-family: 'Orbitron', sans-serif;
  color: #888;
  letter-spacing: 2px;
  margin-bottom: 10px;
}

.stat-big-number {
  font-family: 'Orbitron', sans-serif;
  font-size: 4em;
  color: var(--accent-neon-blue);
  text-shadow: 0 0 10px rgba(0, 240, 255, 0.5);
}

.stat-big-number.gold {
  color: var(--accent-gold);
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

.stat-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
}

.stat-card {
  background: rgba(42, 42, 42, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: 15px;
  padding: 20px;
}

.stat-card h4 {
  color: #aaa;
  margin-bottom: 15px;
  border-bottom: 1px solid #444;
  padding-bottom: 10px;
}

.stat-row-item {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
  font-size: 0.9em;
}

.stat-bar-container {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
}

.stat-bar-label {
  width: 60px;
  /* mood emoji width */
  font-size: 1.2em;
}

.stat-bar-bg {
  flex: 1;
  height: 8px;
  background: #333;
  border-radius: 4px;
  overflow: hidden;
}

.stat-bar-fill {
  height: 100%;
  background: var(--accent-neon-pink);
  width: 0%;
  transition: width 1s ease-out;
}

.stat-bar-val {
  width: 30px;
  text-align: right;
  color: #888;
  font-size: 0.8em;
}

/* Update List View to be compact */
.list-item {
  padding: 15px;
  /* Reduced padding */
  display: flex;
  align-items: center;
  gap: 15px;
  /* Reduced gap */
}

/* Hide images in list view per feedback */
.list-item img {
  display: none !important;
}

.list-content {
  flex: 1;
}

.list-title {
  font-size: 1.1em;
  /* Slightly smaller */
}

/* Upload Button Styling (Finger cursor, button-like) */
.custom-file-upload.btn-style {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 8px;
  padding: 8px 12px;
  /* Smaller padding */
  cursor: pointer;
  /* Finger cursor */
  user-select: none;
  /* Prevent text selection */
  transition: all 0.2s;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 5px;
  /* Smaller gap */
  font-size: 0.9em;
  /* Smaller text */
}

.custom-file-upload.btn-style svg {
  width: 20px;
  height: 20px;
}

.custom-file-upload.btn-style:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: var(--accent-neon-blue);
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0, 240, 255, 0.2);
}

.save-btn {
  cursor: pointer;
}

.image-preview {
  max-height: 200px;
  /* Constrain height */
  width: auto;
  max-width: 100%;
  object-fit: contain;
  margin-top: 10px;
  border-radius: 8px;
}



/* Review Textarea Sizing */
#recordReview {
  min-height: 150px;
  /* Larger default */
}

/* Custom Retro Popup */
#customPopup {
  z-index: 20000 !important;
  pointer-events: none;
  /* Default: Click-through when invisible */
}

#customPopup.active {
  pointer-events: auto;
  /* Active: Capture clicks */
}

.retro-popup {
  border: 2px solid var(--glass-border);
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.8), inset 0 0 50px rgba(0, 0, 0, 0.5);
  z-index: 10001;
  position: relative;
  background: rgba(20, 20, 30, 0.95);
  pointer-events: auto;
  /* Content always clickable IF parent allows */
}

.popup-buttons button {
  cursor: pointer !important;
  pointer-events: auto !important;
}

.modal {
  z-index: 10000;
  /* Standard Modal Z-index */
}

.popup-buttons {
  display: flex;
  justify-content: center;
  gap: 15px;
}

/* FIX: Active state for Mood Buttons */
.mood-option:hover {
  opacity: 0.8 !important;
  transform: scale(1.2);
  filter: grayscale(20%) !important;
}

.mood-option.active {
  opacity: 1 !important;
  filter: grayscale(0%) !important;
  text-shadow: 0 0 15px rgba(255, 255, 0, 0.5);
  transform: scale(1.2);
}

/* FIX: Stronger rules for Custom Popup Buttons */
#customPopup .popup-buttons button {
  cursor: pointer !important;
  pointer-events: auto !important;
  z-index: 20002 !important;
  position: relative;
  transition: transform 0.1s;
}

#customPopup .popup-buttons button:hover {
  transform: scale(1.05);
  filter: brightness(1.2);
}

#customPopup .popup-buttons button:active {
  transform: scale(0.95);
}

/* Ensure content is strictly above overlay */
.retro-popup {
  z-index: 20001 !important;
}

/* --- New Title Input Style --- */
.title-group {
  margin-bottom: 20px;
  border-bottom: 2px solid var(--accent-gold);
}

.title-input {
  background: transparent !important;
  border: none !important;
  border-radius: 0 !important;
  font-family: 'Orbitron', sans-serif;
  font-size: 1.5em;
  color: #fff;
  padding: 10px 0;
  width: 100%;
}

.title-input:focus {
  box-shadow: none !important;
  border-bottom: 2px solid var(--accent-neon-blue);
}

.title-input::placeholder {
  color: #555;
  font-style: italic;
  font-size: 0.8em;
}

/* --- Rating Distribution Graph --- */
.stat-graph {
  display: flex;
  align-items: flex-end;
  height: 150px;
  gap: 15px;
  padding: 10px 0;
  border-bottom: 1px solid #444;
}

.graph-bar-container {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  align-items: center;
  height: 100%;
}

.graph-bar {
  width: 80%;
  background: var(--accent-neon-pink);
  border-radius: 4px 4px 0 0;
  transition: height 1s ease-out;
  min-height: 2px;
  position: relative;
}

.graph-bar:hover {
  filter: brightness(1.2);
}

.graph-bar-label {
  margin-top: 5px;
  font-size: 0.8em;
  color: #888;
}

.graph-bar-count {
  margin-bottom: 5px;
  font-size: 0.8em;
  color: #fff;
  font-weight: bold;
}

/* --- Category Edit Mode --- */
.edit-mode-btn {
  background: transparent !important;
  border: none !important;
  font-size: 1.2em;
  color: #666;
  transition: all 0.3s;
}

.edit-mode-btn:hover,
.edit-mode-btn.active {
  color: var(--accent-neon-pink);
  transform: scale(1.1);
}

.category-tab.deletable {
  position: relative;
  /* Shaking Animation? */
  animation: shake 0.5s infinite;
  border-color: var(--accent-neon-pink);
  color: var(--accent-neon-pink);
}

.category-tab.deletable::after {
  content: 'x';
  display: block;
  position: absolute;
  top: -5px;
  right: -5px;
  background: var(--accent-neon-pink);
  color: #fff;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  font-size: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
}

@keyframes shake {
  0% {
    transform: rotate(0deg);
  }

  25% {
    transform: rotate(2deg);
  }

  75% {
    transform: rotate(-2deg);
  }

  100% {
    transform: rotate(0deg);
  }
}

/* --- Bucket Category Filter Buttons --- */
.category-filter-container {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
}

.filter-btn {
  padding: 8px 16px;
  border: 1px solid var(--glass-border);
  background: rgba(255, 255, 255, 0.05);
  color: #aaa;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 0.9em;
}

.filter-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
}

.filter-btn.active {
  background: var(--accent-neon-blue);
  color: #000;
  font-weight: bold;
  box-shadow: 0 0 10px rgba(5, 217, 232, 0.4);
  border-color: var(--accent-neon-blue);
}

/* --- Misc Button Cursors --- */
.delete-btn {
  cursor: pointer !important;
}

.ticket-btn {
  cursor: pointer !important;
}

.sidebar-btn {
  cursor: pointer !important;
}

.close-btn {
  cursor: pointer !important;
}

/* --- Bucket Modal Fixes --- */
#bucketActionModal {
  z-index: 3000 !important;
}

.popup-buttons.vertical {
  flex-direction: column;
  gap: 10px;
  width: 100%;
}

.popup-buttons.vertical button {
  width: 100%;
  margin: 0 !important;
}

/* --- Stats Gold Graph --- */
.graph-bar {
  background: var(--accent-gold);
  /* Gold Color */
}

.stat-graph-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
}

.stat-avg-display {
  color: var(--accent-gold);
  font-family: 'Orbitron', sans-serif;
  font-size: 1.2em;
  margin-top: 10px;
}

/* --- New Stats Sections --- */
.stat-flex-row {
  display: flex;
  gap: 20px;
  margin-top: 20px;
}

.stat-half-card {
  flex: 1;
  background: rgba(42, 42, 42, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.05);
}



/* Mind Map / Keywords Container */
.mindmap-container {
  display: block;
  width: 100%;
  height: 250px;
  /* Explicit height is required for ZingChart */
  position: relative;
  overflow: hidden;
}

.title-input {
  color: #f2f4f5 !important;
  /* Cyan */
}

/* --- ULTIMATE Z-INDEX FIX --- */
#bucketAddModal,
#bucketActionModal {
  z-index: 30000 !important;
  pointer-events: auto !important;
}

.modal-content.retro-popup {
  z-index: 30002 !important;
}

/* Ensure buttons inside are reachable */
#bucketAddModal button,
#bucketActionModal button {
  pointer-events: auto !important;
  z-index: 30005 !important;
}

/* Cyan Title Fix */
.title-input {
  color: #00e5ff !important;
}

/* --- UI FIX: Just Remove Button & Layout --- */
.btn-ghost-white {
  background: transparent !important;
  border: 1px solid rgba(255, 255, 255, 0.8) !important;
  color: #fff !important;
  transition: all 0.2s;
}

.btn-ghost-white:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  border-color: #fff !important;
}

/* Restore Horizontal layout for Bucket Action Modal */
#bucketActionModal .popup-buttons.vertical {
  flex-direction: row !important;
  gap: 10px;
  width: 100%;
}

#bucketActionModal .popup-buttons button {
  flex: 1;
  /* Equal width */
  margin: 0 !important;
}

/* --- Menu Bar Fix --- */
.floating-sidebar {
  z-index: 9000 !important;
  /* Ensure it stays on top but below modals */
  right: 20px !important;
  background: rgba(0, 0, 0, 0.8) !important;
  /* Darker bg to clearly separate */
}

/* --- Title Input Fix --- */
.title-input {
  color: #fff !important;
  /* Text White */
  border-bottom: 2px solid #00e5ff !important;
  /* Line Cyan */
}

/* --- Stats Fix: Ensure visibility --- */
.stat-big-number {
  opacity: 1 !important;
  visibility: visible !important;
}

.stat-canvas {
  min-height: 200px;
}

.floating-sidebar {
  position: fixed !important;
  right: 20px !important;
  top: 50% !important;
  bottom: auto !important;
  transform: translateY(-50%) !important;
  background: #000 !important;
  border: 1px solid #333;
  border-radius: 30px;
  padding: 10px 5px;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

/* --- Unified Grid Stats --- */
.stats-dashboard {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  padding: 20px;
  max-width: 1000px;
  margin: 0 auto;
}

.stat-card {
  background: rgba(42, 42, 42, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: 15px;
  padding: 20px;
  display: flex;
  flex-direction: column;
  min-height: 220px;
  /* Uniform height */
}

.stat-card.span-2 {
  grid-column: span 2;
  min-height: auto;
  /* Allow auto height for total count */
}

.stat-card h4 {
  color: #aaa;
  margin-bottom: 15px;
  border-bottom: 1px solid #444;
  padding-bottom: 10px;
}

/* Hide ZingChart Watermark (Optional but requested to look clean) */
#statMindMap-license-text {
  display: none !important;
}

.stat-graph-container {
  height: 100%;
  justify-content: flex-end;
  /* Push bars to bottom */
}

.stat-graph {
  flex: 1;
  display: flex;
  align-items: flex-end;
  padding-bottom: 10px;
}


.tag-container {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
  min-height: 40px;
  padding: 5px;
  overflow: visible;
  /* Prevent clipping */
}

/* Ensure Ticket Btn cursor remains */
.ticket-btn {
  cursor: pointer;
}

.close-btn {
  cursor: pointer;
}


/* --- Unified Button Styles (User Request) --- */
.save-btn,
.delete-btn,
.cancel-btn {
  padding: 12px 20px !important;
  border-radius: 12px !important;
  border: none !important;
  font-family: 'Exo 2', sans-serif;
  font-weight: 600;
  font-size: 0.95em;
  cursor: pointer;
  transition: all 0.2s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Primary Action (Write, Add) */
.save-btn {
  background: var(--accent-neon-blue) !important;
  color: #000 !important;
  box-shadow: 0 0 10px rgba(0, 240, 255, 0.3);
}

.save-btn:hover {
  transform: translateY(-2px);
  background: #fff !important;
  box-shadow: 0 0 20px rgba(0, 240, 255, 0.6);
}

/* Destructive / Dark Action (Remove) */
.delete-btn {
  background: #333 !important;
  /* Dark Grey */
  color: #ccc !important;
  border: 1px solid #444 !important;
}

.delete-btn:hover {
  background: #444 !important;
  color: #fff !important;
  border-color: #ff2a6d !important;
  transform: translateY(-2px);
}

/* Neutral / Cancel Action */
.sidebar-btn {
  background: transparent !important;
  color: #aaa !important;
  border: 1px solid transparent !important;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  /* Circle */
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  padding: 0 !important;
  /* Reset padding */
}

.sidebar-btn:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  color: #fff !important;
  border-color: rgba(255, 255, 255, 0.5) !important;
  transform: scale(1.1);
  /* Zoom effect */
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
}

.sidebar-btn.active {
  background: var(--accent-neon-pink) !important;
  color: #fff !important;
  box-shadow: 0 0 15px var(--accent-neon-pink);
}

/* --- Main List View Styles --- */
.list-item {
  display: flex;
  align-items: center;
  padding: 15px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  cursor: pointer;
  /* Finger cursor */
  transition: background 0.2s;
}

.list-item:hover {
  background: rgba(255, 255, 255, 0.05);
}

.list-image {
  width: 60px;
  height: 60px;
  object-fit: cover;
  border-radius: 8px;
  border: 1px solid #444;
  margin-right: 15px;
}

.list-date {
  width: 50px;
  text-align: center;
  margin-right: 15px;
  font-weight: bold;
  color: var(--accent-neon-blue);
  font-size: 1.1em;
  line-height: 1.2;
}

.list-content {
  flex: 1;
}

.list-title {
  font-weight: 600;
  font-size: 1.1em;
  color: #fff;
  margin-bottom: 4px;
}

.list-subtitle {
  font-size: 0.9em;
  color: #aaa;
}


.list-image {
  width: 60px;
  height: 60px;
  object-fit: cover;
  border-radius: 8px;
  border: 1px solid #444;
  margin-right: 15px;
  display: block;
  /* Ensure visibility */
}

/* --- Bucket & Action Modal Refinements --- */
/* 1. Remove Glow from Bucket Add Category Buttons */
#bucketAddModal .category-btn {
  box-shadow: none !important;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

#bucketAddModal .category-btn.active {
  background: var(--accent-neon-blue);
  color: #000;
  box-shadow: none !important;
}

/* 2. Increase Margins for Bucket Add Modal */
#bucketAddModal .modal-content {
  padding: 40px !important;
}

#bucketAddModal .form-group {
  margin-bottom: 25px !important;
}

/* 3. Action Modal Margins & Button Sizing */
#bucketActionModal .modal-content {
  padding: 40px !important;
}

#bucketActionModal .popup-buttons {
  display: flex;
  gap: 15px;
  width: 100%;
}

/* Make Cancel button size equal to others */
#bucketActionModal .cancel-btn,
#bucketActionModal .save-btn,
#bucketActionModal .delete-btn {
  width: 100% !important;
  padding: 12px 0 !important;
  /* Ensure consistent padding */
  text-align: center;
  margin-bottom: 10px;
}

#bucketActionModal .cancel-btn {
  background: transparent;
  border: 1px solid #666;
  color: #ccc;
}

#bucketActionModal .cancel-btn:hover {
  border-color: #fff;
  color: #fff;
  background: rgba(255, 255, 255, 0.1);
}


.list-image {
  background-color: #333;
  /* Fallback for empty/loading */
}

/* --- Custom Popup & Ticket Alert Margins --- */
#customPopup .modal-content {
  padding: 40px !important;
}

#customPopup .popup-message {
  margin: 20px 0;
  line-height: 1.6;
}


/* --- Fix Add Category Modal Z-Index --- */
#addCategoryModal {
  z-index: 4000 !important;
}


/* --- Retro Computer Overlay & Background --- */
body {
  background: url('bg_retro.png') no-repeat center center scroll !important;
  background-size: cover !important;
  /* Ensure body takes full height to center the container */
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

.computer-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: url('computer_overlay.png') no-repeat center center;
  background-size: contain;
  /* Maintain image ratio */
  z-index: 9999;
  pointer-events: none;
}

/* Adjust Container to fit inside the monitor bezel */
.container {
  /* Scale down and center */
  transform: scale(0.85);
  margin-top: -20px;
  /* Slight offset if needed */
  box-shadow: none !important;
  /* Remove outer glow if it clashes */
  max-width: 1200px;
  width: 90%;
  z-index: 1;
  /* Ensure content is above body bg but below overlay */
  position: relative;
}

/* --- Ticket Gallery Wall --- */
.ticket-wall {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  padding: 20px;
  justify-content: center;
  min-height: 400px;
  /* Optional: Background pattern for wall look? Use existing retro bg. */
}

.ticket-wall-item {
  width: 200px;
  height: auto;
  transition: transform 0.2s;
  cursor: pointer;
  position: relative;
  /* Add stick/shadow effect */
  box-shadow: 2px 5px 10px rgba(0, 0, 0, 0.5);
  transform: rotate(var(--rotation));
}

.ticket-wall-item:hover {
  transform: scale(1.1) rotate(0deg) !important;
  z-index: 10;
}

.ticket-wall-item img {
  width: 100%;
  display: block;
  border-radius: 4px;
}


/* --- Remove Overlay Override --- */
.computer-overlay {
  display: none !important;
}

.container {
  transform: none !important;
  margin-top: 0 !important;
  width: 90% !important;
  max-width: 1200px !important;
  box-shadow: 0 0 20px rgba(5, 217, 232, 0.4) !important;
}


/* --- Fix Add Category Modal Z-Index (Persistent) --- */
#addCategoryModal {
  z-index: 99999 !important;
  pointer-events: auto !important;
}


/* --- Fix Add Category Modal Z-Index (Persistent) --- */
#addCategoryModal {
  z-index: 99999 !important;
  pointer-events: auto !important;
}


/* --- Missing Modal CSS (Restored) --- */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  pointer-events: auto;
}

.modal-overlay.active {
  display: flex !important;
}

.modal-content {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  padding: 20px;
  border: 1px solid var(--glass-border);
  border-radius: 10px;
  position: relative;
  z-index: 10000;
  pointer-events: auto;
}


/* --- Ensure Popup Buttons Layout --- */
.popup-buttons {
  display: flex;
  justify-content: center;
  gap: 10px;
}


.popup-buttons {
  pointer-events: auto !important;
}


/* --- Emergency Fix for Blocking Overlays --- */
body::before,
body::after,
.container::before,
.container::after,
.retro-popup::before,
.retro-popup::after,
.modal-content::before,
.modal-content::after,
.modal-overlay::before,
.modal-overlay::after {
  pointer-events: none !important;
}

/* --- Ticket System Styles (Premium Vertical) --- */
.ticket-view {
  display: none;
  /* Hidden template */
  width: 350px;
  height: 650px;
  /* Vertical Ratio */
  background-color: #000;
  background-size: cover;
  background-position: center;
  position: relative;
  overflow: hidden;
  /* Edges are handled by inner divs or masking */
  font-family: 'Exo 2', sans-serif;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
  /* Use a mask for serrated edges? Or pseudo elements */
}

/* Serrated Edges using radial gradient pattern */
.ticket-edge {
  position: absolute;
  left: 0;
  width: 100%;
  height: 15px;
  background-color: #000;
  z-index: 10;
  background-image: radial-gradient(circle, transparent 70%, #000 75%);
  background-size: 20px 20px;
  background-repeat: repeat-x;
}

/* Vintage Ticket Shape Mask */
.ticket-view {
  /* Using mask to cut out corners and create perforated edges */
  --notch-size: 15px;
  --tooth-size: 14px;
  /* Width of one tooth/gap cycle */
  --tooth-radius: 4px;

  -webkit-mask-image:
    /* 4 Corner Notches */
    radial-gradient(circle at top left, transparent var(--notch-size), black calc(var(--notch-size) + 1px)),
    radial-gradient(circle at top right, transparent var(--notch-size), black calc(var(--notch-size) + 1px)),
    radial-gradient(circle at bottom left, transparent var(--notch-size), black calc(var(--notch-size) + 1px)),
    radial-gradient(circle at bottom right, transparent var(--notch-size), black calc(var(--notch-size) + 1px)),

    /* Top Edge Perforations */
    radial-gradient(circle at top center, transparent var(--tooth-radius), black calc(var(--tooth-radius) + 0.5px)),

    /* Bottom Edge Perforations */
    radial-gradient(circle at bottom center, transparent var(--tooth-radius), black calc(var(--tooth-radius) + 0.5px));

  mask-image:
    radial-gradient(circle at top left, transparent var(--notch-size), black calc(var(--notch-size) + 1px)),
    radial-gradient(circle at top right, transparent var(--notch-size), black calc(var(--notch-size) + 1px)),
    radial-gradient(circle at bottom left, transparent var(--notch-size), black calc(var(--notch-size) + 1px)),
    radial-gradient(circle at bottom right, transparent var(--notch-size), black calc(var(--notch-size) + 1px)),
    radial-gradient(circle at top center, transparent var(--tooth-radius), black calc(var(--tooth-radius) + 0.5px)),
    radial-gradient(circle at bottom center, transparent var(--tooth-radius), black calc(var(--tooth-radius) + 0.5px));


  -webkit-mask-position:
    top left, top right, bottom left, bottom right,
    0 0, 0 100%;
  /* Edges */

  -webkit-mask-size:
    50% 50%, 50% 50%, 50% 50%, 50% 50%,
    /* Corners (cover quadrants) */
    var(--tooth-size) 20px, var(--tooth-size) 20px;
  /* Edges */

  -webkit-mask-repeat: no-repeat, no-repeat, no-repeat, no-repeat, repeat-x, repeat-x;


  -webkit-mask-composite: destination-in;
  mask-composite: intersect;
}

.ticket-view {
  --r: 20px;
  /* Corner notch radius */
  --p: 8px;
  /* Perforation radius */

  -webkit-mask-image:
    /* Corners */
    radial-gradient(circle at top left, transparent var(--r), black calc(var(--r) + 0.5px)),
    radial-gradient(circle at top right, transparent var(--r), black calc(var(--r) + 0.5px)),
    radial-gradient(circle at bottom left, transparent var(--r), black calc(var(--r) + 0.5px)),
    radial-gradient(circle at bottom right, transparent var(--r), black calc(var(--r) + 0.5px)),
    /* Edge Perforations (Top) */
    radial-gradient(circle at top center, transparent var(--p), black calc(var(--p) + 0.5px)),
    /* Edge Perforations (Bottom) */
    radial-gradient(circle at bottom center, transparent var(--p), black calc(var(--p) + 0.5px));

  -webkit-mask-position:
    top left, top right, bottom left, bottom right,
    0 0, 0 100%;

  -webkit-mask-size:
    51% 51%, 51% 51%, 51% 51%, 51% 51%,
    /* Quadrants for corners */
    30px 30px, 30px 30px;
  /* Tooth spacing */

  -webkit-mask-repeat: no-repeat, no-repeat, no-repeat, no-repeat, repeat-x, repeat-x;

  -webkit-mask-composite: destination-in;
  mask-composite: intersect;
}

/* If mask is used, we don't need .ticket-edge divs unless for decoration */
.ticket-edge {
  display: none;
}


.ticket-content-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0) 40%, rgba(0, 0, 0, 0.8) 70%, #000 100%);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 30px 25px;
  box-sizing: border-box;
  color: #fff;
}

.ticket-header-overlay {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid rgba(255, 255, 255, 0.4);
  padding-bottom: 10px;
}

.ticket-brand {
  font-size: 0.7em;
  letter-spacing: 2px;
  font-weight: 700;
  color: rgba(255, 255, 255, 0.8);
}

.ticket-year {
  font-family: 'Courier New', monospace;
  font-size: 1.2em;
  font-weight: bold;
}

.ticket-main-info {
  margin-top: auto;
  margin-bottom: 20px;
}

.ticket-main-info h2 {
  font-family: 'Playfair Display', serif;
  /* Use Serif for premium feel */
  font-size: 2.8em;
  line-height: 1;
  margin: 0 0 10px 0;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
  font-weight: 700;
  color: var(--accent-gold);
  /* Plain color instead of gradient to avoid yellow bar issue */
}

.ticket-rating-stars {
  color: var(--accent-gold);
  font-size: 1.2em;
}

.ticket-details-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  border-top: 1px solid rgba(255, 255, 255, 0.3);
  padding-top: 15px;
  margin-bottom: 20px;
}

.ticket-detail-item label {
  display: block;
  font-size: 0.6em;
  color: rgba(255, 255, 255, 0.6);
  letter-spacing: 1px;
  margin-bottom: 3px;
  text-transform: uppercase;
}

.ticket-detail-item span {
  font-size: 0.95em;
  font-weight: 500;
  font-family: 'Roboto', sans-serif;
  text-shadow: 1px 1px 2px #000;
}

.ticket-detail-item.full-width {
  grid-column: span 2;
}

.review-text {
  font-style: italic;
  font-size: 0.85em;
  line-height: 1.4;
  color: #ddd;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.ticket-footer-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.7em;
  opacity: 0.7;
  border-top: 1px dashed rgba(255, 255, 255, 0.3);
  padding-top: 10px;
}

.barcode-font {
  font-family: 'Libre Barcode 39 Text', monospace;
  /* Google Font to be added? Or simple representation */
  letter-spacing: 3px;
  font-size: 1.2em;
}

/* Ticket Preview Modal Adjustments */
.ticket-preview-container img {
  border-radius: 0;
  /* Let mask handle shape? or maintain round */
  /* If downloaded image has transparency from mask, standard img tag works */
  background: transparent;
  box-shadow: none;
}

/* --- Bucket List Visual Updates --- */
/* Base updates for renderBookshelf done in script, styling here */
.book-spine.type-book {
  /* Matte / Texture Look */
  background-image:
    linear-gradient(90deg, rgba(255, 255, 255, 0.05) 0%, rgba(0, 0, 0, 0.1) 20%, rgba(0, 0, 0, 0.1) 80%, rgba(255, 255, 255, 0.05) 100%),
    url('data:image/svg+xml,%3Csvg viewBox=\u00220 0 200 200\u0022 xmlns=\u0022http://www.w3.org/2000/svg\u0022%3E%3Cfilter id=\u0022noiseFilter\u0022%3E%3CfeTurbulence type=\u0022fractalNoise\u0022 baseFrequency=\u00220.8\u0022 numOctaves=\u00223\u0022 derived=\u0022true\u0022/%3E%3C/filter%3E%3Crect width=\u0022100%25\u0022 height=\u0022100%25\u0022 filter=\u0022url(%23noiseFilter)\u0022 opacity=\u00220.1\u0022/%3E%3C/svg%3E');
  box-shadow: inset 1px 0 2px rgba(255, 255, 255, 0.1), 3px 0 5px rgba(0, 0, 0, 0.6);
  border-radius: 2px 4px 4px 2px;
}

.book-spine.type-dvd {
  /* Plastic / Glossy Look */
  height: 90% !important;
  /* Slightly shorter */
  margin-top: auto;
  /* Align bottom */
  background-image:
    linear-gradient(90deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0) 10%, rgba(255, 255, 255, 0) 85%, rgba(255, 255, 255, 0.1) 100%),
    linear-gradient(to bottom, transparent 2%, rgba(0, 0, 0, 0.3) 2%, rgba(0, 0, 0, 0.3) 8%, transparent 8%);
  /* Top plastic insert line */
  box-shadow: inset 0 0 5px rgba(255, 255, 255, 0.2), 2px 5px 8px rgba(0, 0, 0, 0.7);
  border-radius: 1px 2px 2px 1px;
}

/* Ticket Wall Styles (Restored) */
.ticket-wall-container {
  display: flex;
  flex-wrap: wrap;
  gap: 30px;
  padding: 40px;
  justify-content: center;
  align-content: flex-start;
  overflow-y: auto;
  height: calc(100vh - 150px);
  margin-top: 20px;
}

.view-section h2.month-year {
  display: block;
  /* Ensure it takes full width */
  text-align: center;
  margin-bottom: 40px;
  /* More space */
  margin-top: 20px;
  font-size: 2.5em;
  /* Larger title */
  color: #fff;
  width: 100%;
}

.ticket-wall-item {
  width: 200px;
  transition: transform 0.3s ease, z-index 0.3s;
  position: relative;
  filter: drop-shadow(0 10px 15px rgba(0, 0, 0, 0.5));
  cursor: pointer;
  transform: rotate(var(--rotation));
  /* Critical: Apply random rotation */
  margin: 15px;
  /* Spacing for natural look */
}

.ticket-wall-item:hover {
  z-index: 1000;
  transform: scale(1.2) rotate(0deg) !important;
}

.ticket-wall-item img {
  width: 100%;
  pointer-events: none;
}

/* === VHS Tape Style for Bucket List === */
.book-spine.type-vhs {
  background-color: #1a1a1a;
  background-image: linear-gradient(90deg, #111 2px, transparent 2px);
  background-size: 4px 100%;
  border: 1px solid #333;
  border-radius: 4px;
  display: flex !important;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 4px;
  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
  min-width: 40px;
}

.book-spine.type-vhs .vhs-label {
  background-color: #f0f0f0;
  color: #000;
  width: 100%;
  height: 85%;
  display: flex;
  align-items: center;
  justify-content: center;
  writing-mode: vertical-rl;
  text-orientation: mixed;
  font-family: 'Exo 2', sans-serif;
  font-size: 1.0em;
  font-weight: 700;
  letter-spacing: 0.5px;
  text-align: center;
  position: relative;
  border-top: 8px solid var(--book-color);
  border-bottom: 8px solid var(--book-color);
  border-radius: 2px;
  box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);
}